*** Settings ***
Resource          ../../../../Config/LocalConfig.txt
Resource          ../Resource/PageKeywords/BalanceTransfer.txt

*** Test Cases ***
[F1_Service_1,3_1-2_Y_1_1] Verify menu service
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. ตรวจสอบ เมนู ""บริการ""
    ...    - โอนเงิน
    ...    - โอนวัน
    ...    - สมัคร AIS Fibre/เช็กพื้นที่ให้บริการ
    ...    - ขอรับ/เปลี่ยนรหัส WiFi
    ...    - เพลงรอสาย
    ...    4. Capture screen"
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Verify Menu ""Service""
    ...    - Balance Transfer
    ...    - Validity Transfer
    ...    - Register AIS Fibre/Coverage Checking
    ...    - Request/Change WiFi Password
    ...    - Calling Melody
    ...    4. Capture screen"
    [Tags]    success    active    regression    sanity
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    Set Network Connection    ${${ar_NETWORK}}    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_SN}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Verify Menu Service
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_Y_2_1] Verify balance transfer page
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. ตรวจสอบหน้า ""โอนเงิน""
    ...    - หมายเลขโทรศัพท์
    ...    - โอนเงินให้เพื่อนๆ ในระบบ AIS One-2-Call! ได้ง่ายๆที่นี่ (Text)
    ...    - 1.กรอกหมายเลขโทรศัพท์ปลายทางที่ต้องการโอนเงินให้
    ...    - 2.จำนวนเงินที่ต้องการโอน/บาท
    ...    - ปุ่ม ""ตกลง""
    ...    - เงื่อนไขบริการ
    ...    5. Capture screen"
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Verify ""Balance Transfer"" page
    ...    - Mobile Number
    ...    - You can transfer balance to your friend in AIS \ One-2-Call! Network with ease and convenience. Just fill out the following details (Text)
    ...    - 1.Enter destination number
    ...    - 2.Transfer amount/Baht
    ...    - ""OK"" Button
    ...    - Terms & Conditions
    ...    5. Capture screen"
    [Tags]    success    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    Set Network Connection    ${${ar_NETWORK}}    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_SN}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Verify Balance Transfer Page    ${Number}
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_Y_3_1] Balance transfer case tansfer to prepaid number 3PE
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : 3PE
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 09xxxxxxx""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""ดำเนินการเรียบร้อยแล้ว กรุณารอรับ SMS เพื่อยืนยันการทำรายการ""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง""
    ...    12. ตรวจสอบ SMS Devices A ""คุณได้โอนเงินจำนวน xx บาทให้กับ 0xxxxxxxxx เรียบร้อยแล้วค่ะ""
    ...    13. Capture screen
    ...    14. ตรวจสอบ SMS Devices B ""คุณได้รับเงินจาก 0xxxxxxxxx เป็นจำนวน xx บาท เรียบร้อยแล้วค่ะ ซื้อแพ็กเน็ตที่ http://m.ais.co.th/otp-btr""
    ...    15. Capture screen"
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    >> Capture screen
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""Transection processed successfully Please wait for a confirmation SMS.""
    ...    10. Capture screen
    ...    11. Click ""OK""
    ...    12.Verify SMS Devices A ""You have successfully transferred xx baht to 0xxxxxxxxx.""
    ...    13. Capture screen
    ...    14. Verify SMS DevicesB ""0xxxxxxxxx has transferred xx baht to your account.Buy Package http://m.ais.co.th/otp-btr""
    ...    15. Capture screen"
    [Tags]    success    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number_Source}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_2    ${ar_TAKE_TIMEOUT}    3PE_Destination=include
    ${Number_Dest}    Get From Dictionary    ${virtual_device_2_Number}    3PE_Destination
    Set Network Connection    ${${ar_NETWORK}}    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_SN}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number_Source}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${Number_Dest}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${Number_Dest}
    Click Confirm Button
    Verify Dialog Message Transection Successfully
    Verify SMS For Source Number    ${Number_Dest}    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Run Keyword And Ignore Error    Logout    #Logout
    Run Keyword And Ignore Error    Close Application
    Verify SMS For Destination Number    ${Number_Source}    ${virtual_device_2_IPAppium}    ${virtual_device_2_Platfrom_Name}    ${virtual_device_2_Platfrom_Version}    ${virtual_device_2_SN}
    [Teardown]    Keywords For Teardown 2 Mobile    ${#dict_device_name}

[F1_Service_1,3_1-2_Y_4_1] Balance transfer case transfer to prepaid number 3BE
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : 3BE
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 09xxxxxxx""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""ดำเนินการเรียบร้อยแล้ว กรุณารอรับ SMS เพื่อยืนยันการทำรายการ""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง""
    ...    12. ตรวจสอบ SMS Devices A ""คุณได้โอนเงินจำนวน xx บาทให้กับ 0xxxxxxxxx เรียบร้อยแล้วค่ะ""
    ...    13. Capture screen
    ...    14. ตรวจสอบ SMS Devices B ""คุณได้รับเงินจาก 0xxxxxxxxx เป็นจำนวน xx บาท เรียบร้อยแล้วค่ะ ซื้อแพ็กเน็ตที่ http://m.ais.co.th/otp-btr""
    ...    15. Capture screen"
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    >> Capture screen
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""Transection processed successfully Please wait for a confirmation SMS.""
    ...    10. Capture screen
    ...    11. Click ""OK""
    ...    12.Verify SMS Devices A ""You have successfully transferred xx baht to 0xxxxxxxxx.""
    ...    13. Capture screen
    ...    14. Verify SMS DevicesB ""0xxxxxxxxx has transferred xx baht to your account.Buy Package http://m.ais.co.th/otp-btr""
    ...    15. Capture screen"
    [Tags]    success    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number_Source}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_2    ${ar_TAKE_TIMEOUT}    3BE_Destination=include
    ${Number_Dest}    Get From Dictionary    ${virtual_device_2_Number}    3BE_Destination
    Set Network Connection    ${${ar_NETWORK}}    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_SN}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number_Source}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${Number_Dest}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${Number_Dest}
    Click Confirm Button
    Verify Dialog Message Transection Successfully
    Verify SMS For Source Number    ${Number_Dest}    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Run Keyword And Ignore Error    Logout    #Logout
    Run Keyword And Ignore Error    Close Application
    Verify SMS For Destination Number    ${Number_Source}    ${virtual_device_2_IPAppium}    ${virtual_device_2_Platfrom_Name}    ${virtual_device_2_Platfrom_Version}    ${virtual_device_2_SN}
    [Teardown]    Keywords For Teardown 2 Mobile    ${#dict_device_name}

[F1_Service_1,3_1-2_N_5_1] Balance transfer case transfer to postpaid number
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : Postpaid Number
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 093xxxxxxx""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""หมายเลขปลายทางที่ต้องการโอนเงิน/โอนวัน ไม่ใช่หมายเลขในระบบ เอไอเอส วัน-ทู-คอล! กรุณาระบุใหม่อีกครั้ง""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""The destination number you would like to transfer your balance/validity to is not an AIS One-2-Call! number. Please input other number.""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${AISPostpaidNumber}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${AISPostpaidNumber}
    Click Confirm Button
    Verify Transfer To Postpaid
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_6_1] Balance transfer case transfer to other network
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : other network
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 09xxxxxxxx""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""บริการนี้สำหรับลูกค้าเอไอเอสเท่านั้น กรุณาระบุหมายเลขเอไอเอสใหม่อีกครั้ง""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""The number must be an AIS mobile number only. Please enter a new number.""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${DtacNumber}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${DtacNumber}
    Click Confirm Button
    Verify Transfer To Other Network
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_7_1] Balance transfer case transfer to self
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : หมายเลขตัวเอง
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 09xxxxxxxx""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""ไม่สามารถโอนเงิน/โอนวัน ให้หมายเลขของคุณได้ กรุณาระบุหมายเลขใหม่""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""You cannot transfer your balance/validity to your own number. Please specify the new number.""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${Number}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${Number}
    Click Confirm Button
    Verify Transfer To Self
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_8_1] Balance transfer case not input destination number
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. ไม่กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""กรุณากรอกเลขหมายผู้รับโอนให้ถูกต้อง""
    ...    8. Capture screen
    ...    9. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Not input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""Please enter correct destination number""
    ...    8. Capture screen
    ...    9. Click ""OK"""
    [Tags]    fail    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${EMPTY}
    Input Balance Amount    10
    Click Ok Button
    Verify Please Input Destination Number
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_9_1] Balance transfer case Input destination number wrong format eg 6666666666
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง wrong format
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""กรุณากรอกเลขหมายผู้รับโอนให้ถูกต้อง""
    ...    8. Capture screen
    ...    9. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number wrong format
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""Please enter correct destination number""
    ...    8. Capture screen
    ...    9. Click ""OK"""
    [Tags]    fail    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    6666666666
    Input Balance Amount    10
    Click Ok Button
    Verify Please Input Destination Number
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_10_1] Balance transfer case input destination number wrong digit eg 093701
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. Case : กรอกหมายเลขปลายทาง wrong digit
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""กรุณากรอกเลขหมายผู้รับโอนให้ถูกต้อง""
    ...    8. Capture screen
    ...    9. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Case : Input destination number wrong digit
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""Please enter correct destination number""
    ...    8. Capture screen
    ...    9. Click ""OK"""
    [Tags]    fail    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    093701
    Input Balance Amount    10
    Click Ok Button
    Verify Please Input Destination Number
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_11_1] Balance transfer case not select amount
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. ไม่กรอกจำนวนเงินที่ต้องการโอน
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""กรุณาเลือกจำนวนที่ต้องการ""
    ...    8. Capture screen
    ...    9. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Not select amount
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""Please Select Amount""
    ...    8. Capture screen
    ...    9. Click ""OK"""
    [Tags]    fail    active    regression
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    0923507541
    Comment    Input Balance Amount    10    #not input balance
    Click Ok Button
    Verify Not Select Amount
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_12_1] Balance transfer case balance insufficient
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active
    ...    Register Date >= 90 วัน
    ...    Insufficiant balance"
    ...
    ...
    ...    *remark*
    ...    3BE ใช้ 3PE เพราะว่าไม่สามารถทำซิมส์ได้
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. ตรวจสอบหน้า ""โอนเงิน""
    ...    - หมายเลขโทรศัพท์
    ...    - โอนเงินให้เพื่อนๆ ในระบบ AIS One-2-Call! ได้ง่ายๆที่นี่ (Text)
    ...    - 1.กรอกหมายเลขโทรศัพท์ปลายทางที่ต้องการโอนเงินให้
    ...    - 2.จำนวนเงินที่ต้องการโอน/บาท
    ...    - ยอดเงินคงเหลือไม่เพียงพอ (Dropdown list)
    ...    - ปุ่ม ""ตกลง""
    ...    - เงื่อนไขบริการ
    ...    5. Capture screen"
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Verify ""Balance Transfer"" page
    ...    - Mobile Number
    ...    - You can transfer balance to your friend in AIS \ One-2-Call! Network with ease and convenience. Just fill out the following details (Text)
    ...    - 1.Enter destination number
    ...    - 2.Transfer amount/Baht
    ...    - Insufficient balance (Dropdown list)
    ...    - ""OK"" Button
    ...    - Terms & Conditions
    ...    5. Capture screen"
    [Tags]    fail    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}_InsufficientBalance=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}_InsufficientBalance
    Set Network Connection    ${${ar_NETWORK}}    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_SN}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Verify Balance Transfer Page With Insufficient Number    ${Number}
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_13_1] Balance transfer case destination number has max balance
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : 3PE
    ...    Status : Active
    ...    Register Date >= 90 วัน
    ...    หมายเลขปลายทางมียอด max balance"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 0932015585""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""ขออภัย ระบบไม่สามารถให้บริการได้ในขณะนี้ กรุณาเข้าใช้บริการใหม่ภายหลัง""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""Sorry,the service is unaviable at the moment. Please try again""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active    bug_en
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${AISBossMaxBalanceNumberProd}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${AISBossMaxBalanceNumberProd}
    Click Confirm Button
    Verify Transfer To Max Balance
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_14_1] Balance transfer source number status suspend
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : 3PE
    ...    Status : suspend (Source)
    ...    Register Date >= 90 วัน
    ...    "
    ...    *remark*
    ...    3BE ใช้ 3PE เพราะว่าไม่สามารถทำซิมส์ได้
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. ตรวจสอบ dialog message ""ไม่สามารถเช็กยอดเงินคงเหลือได้ในขณะนี้ กรุณาใช้บริการใหม่ภายหลัง""
    ...    5. Capture screen"
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Verify dialog message ""Balance checking is unaviable at the moment. Please try again later.""
    ...    5. Capture screen"
    [Tags]    fail    bug_en    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}_Suspend=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}_Suspend
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Verify Dialog Source Suspend
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_15_1] Balance transfer destination number status suspend
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : 3PE
    ...    Status : suspend (Dest)
    ...    Register Date >= 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 09xxxxxxxxx""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""ไม่สามารถใช้บริการนี้ได้ในขณะนี้""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""This service is unavailable at the moment.""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${AISNonBossSuspendNumberProd}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${AISNonBossSuspendNumberProd}
    Click Confirm Button
    Verify Dialog Destination Suspend
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_16_1] Balance transfer case source number blacklist
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : 3PE
    ...    Status : Active
    ...    Register Date >= 90 วัน
    ...    COS (Source) = Black List"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 0932015585""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""หมายเลขของคุณไม่สามารถใช้บริการโอนเงิน/โอนวันได้""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""Your mobile number is not eligible for balance/validity transfer service.""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}_BlackList=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}_BlackList
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    0925383048
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    0925383048
    Click Confirm Button
    Verify Dialog Source Blacklist
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_17_1] Balance transfer case destination number blacklist
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    หมายเลขปลายทาง : 3PE
    ...    Status : Active
    ...    Register Date >= 90 วัน
    ...    COS (Dest) = Black List"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 0932015585""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""หมายเลขปลายทางไม่สามารถใช้บริการโอนเงิน/โอนวันได้""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""Destination number you have entered is not eligible to use balance/validity transfer.""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    ${AISNonBossBlacklistNumberProd}
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    ${AISNonBossBlacklistNumberProd}
    Click Confirm Button
    Verify Dialog Destination Blacklist
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F1_Service_1,3_1-2_N_18_1] Balance transfer case source number register date less than 90 days
    [Documentation]    **Owner:Now**
    ...
    ...    *Pre-Requisite*
    ...    "Source Number : 3PE,3BE
    ...    Status : Active
    ...    Register Date < 90 วัน"
    ...
    ...
    ...    *Test Step*
    ...    "1. Login เข้าสู่ระบบ My AIS
    ...    2. เลือกเมนู ""บริการ""
    ...    3. เลือกsub เมนู ""โอนเงิน""
    ...    4. กรอกหมายเลขปลายทาง
    ...    5. เลือกจำนวนเงินที่ต้องการโอน (10 บาท)
    ...    6. เลือกปุ่ม ""ตกลง""
    ...    7. ตรวจสอบ dialog message ""คุณต้องการโอนเงินจำนวน 10 บาทให้หมายเลข 0932015585""
    ...    8. เลือกปุ่ม ""ยืนยัน""
    ...    9. ตรวจสอบ dialog message ""บริการโอนเงิน/โอนวัน ขอสงวนสิทธิ์เฉพาะลูกค้าที่มีอายุการใช้งานตั้งแต่ 90 วันขึ้นไป และ 30 วันขึ้นไปสำหรับบริการโอนวัน""
    ...    10. Capture screen
    ...    11. เลือก""ตกลง"""
    ...
    ...    "1. Login My AIS
    ...    2. Click menu ""Service""
    ...    3. Click sub menu ""Balance Transfer""
    ...    4. Input destination number
    ...    5. Select amount (10 Baht)
    ...    6. Click ""OK"" button
    ...    7. Verify dialog message ""You would like to make a 10 baht transfer to the balance of destination number""
    ...    8. Click ""Confirm"" button
    ...    9. Verify dialog message ""The Balance/validity transfer service reserves for only AIS prepaid customers who have been in the system at least 90 days and 30 days for the Validity Transfer Service.""
    ...    10. Capture screen
    ...    11. Click ""OK"""
    [Tags]    fail    active
    &{#dict_device_name}=    Create Dictionary
    &{#dict_device_name}=    Take And Define Virtual Local Configuration    ${#dict_device_name}    ${lo_MyAIS_Prod_local_config_file_path}    virtual_device_1    ${ar_TAKE_TIMEOUT}    ${ar_NType}_RegisterLessThan30Days=include
    ${Number}    Get From Dictionary    ${virtual_device_1_Number}    ${ar_NType}_RegisterLessThan30Days
    ${appiumInfo}    Open My AIS    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}
    Login    ${virtual_device_1_IPAppium}    ${virtual_device_1_Platfrom_Name}    ${virtual_device_1_Platfrom_Version}    ${virtual_device_1_SN}    ${Number}    ${ar_NETWORK}
    Choose Language    ${ar_LANG}
    Select Menu    Service
    Select Balance Transfer Submenu
    Input Destination Number    0925383048
    Input Balance Amount    10
    Click Ok Button
    Verify Dialog Confirm Balance Transfer    0925383048
    Click Confirm Button
    Verify Dialog Source Register Less than 90 Days
    [Teardown]    Keywords For Teardown    ${#dict_device_name}

[F0_Smoke_0_0_Y_0_0] Smoke Test
    [Tags]    smoke
    log    smoke

test
    [Documentation]    [u'4244.36 Baht']
    ...
    ...    \\d*[.]*\\d*
    ${test}=    Should Match Regexp    Your balance is 4244 Baht.Valid until 05/08/17 For other menu, press 9.    \\d+[.]*\\d*
    log    ${test}

*** Keywords ***
Keywords For Teardown
    [Arguments]    ${#dict_device_name}
    Run Keyword If Test Failed    Capture Screen with Specific name
    Run Keyword If Test Failed    Log Dialog Msg From MyAIS
    Run Keyword And Ignore Error    Logout
    Run Keyword And Ignore Error    Close Application
    Release Virtual Local Configurations    ${lo_MyAIS_Prod_local_config_file_path}    ${#dict_device_name}

Verify Menu Service
    Mobile element name should be    ${subMnuBalanceTransfer}    ${txtBalanceTransfer}
    Mobile element name should be    ${subMnuValidityTransfer}    ${txtValidityTransfer}
    Mobile element name should be    ${subMnuRegisterAISFibre/CheckCoverage}    ${txtRegisterAISFibre}
    Mobile element name should be    ${subMnuRequest/ChangeWiFiPassword}    ${txtRequestAndChangeWifiPassword}
    Mobile element name should be    ${subMnuCallingMelody}    ${txtCallingMelody}
    Mobile Capture Screen At Verify Point    ServicePage

Select Balance Transfer Submenu
    Select Sub Menu    BalanceTransfer

Verify Balance Transfer Page
    [Arguments]    ${MobileNumber}
    Mobile element name should be    ${lblBalanceTransferPageHeader}    ${txtBalanceTransferPageHeader}
    Mobile element name should be    ${lblMobileNumber}    ${MobileNumber}
    Mobile element name should be    ${txtDescriptionBalanceTransferPage}    ${txtDescriptionBalanceTransfer}
    Mobile element name should be    ${lblDestinationNumberHeader}    ${txtDestinationNumberHeader}
    Mobile element name should be    ${lblTransferAmountHeader}    ${txtTransferAmountHeader}
    Mobile element name should be    ${lblTransferAmount}    ${txtTransferAmount}
    Mobile element name should be    ${btnOk}    ${txtOK}
    Swipe to element    ${lblTermsAndConditions}
    Mobile element name should be    ${lblTermsAndConditions}    ${txtTermAndConditions}
    Mobile Capture Screen At Verify Point    Verify in Balance Transfer Page

Input Destination Number
    [Arguments]    ${DestinationNumber}
    Input Mobile Text    ${lblDestinationNumber}    ${DestinationNumber}

Input Balance Amount
    [Arguments]    ${Amount}
    ${lblAmount}=    Set Variable    xpath=//*[@resource-id="android:id/text1" and @text="${Amount}"]
    Click Mobile Element    ${lblTransferAmount}
    Swipe to element    ${lblAmount}    ${ddlTransferAmount}
    Click Mobile Element    ${lblAmount}

Click Ok Button
    Click Mobile Element    ${btnOk}

Verify Dialog Confirm Balance Transfer
    [Arguments]    ${DestNumber}
    ${txtDialog}=    Replace String    ${txtDialogConfirmTransferTo10Baht}    [Number]    ${DestNumber}
    Mobile element text should be    ${lblDialogMessage}    ${txtDialog}
    Mobile Capture Screen At Verify Point    Verify in Dialog Confirm Balance Transfer

Verify SMS For Source Number
    [Arguments]    ${DestinationNumber}    ${IPAppium}    ${Platfrom_Name}    ${Platfrom_Version}    ${SN}
    ${newMessage}=    Replace String    ${txtSMSSuccessTransferredTo}    [Number]    ${DestinationNumber}
    Verify SMS From AIS with Match Regexp    ${newMessage}    ${IPAppium}    ${Platfrom_Name}    ${Platfrom_Version}    ${SN}
    Mobile Capture Screen At Verify Point    Verify in SMS For Source \ Number

Verify SMS For Destination Number
    [Arguments]    ${SourceNumber}    ${IPAppium}    ${Platfrom_Name}    ${Platfrom_Version}    ${SN}    ${TotalSMS}=1
    ${newMessage}=    Replace String    ${txtSMSHasTransferredForm}    [Number]    ${SourceNumber}
    Open SMS App    ${IPAppium}    ${Platfrom_Name}    ${Platfrom_Version}    ${SN}
    ${status}=    Run Keyword And Return Status    Wait SMS    ${Platfrom_Name}    ${TotalSMS}    ${lo_sms_timeout}    AIS
    Run Keyword If    '${status}'=='False'    Fail
    ${messages}=    Read SMS    ${Platfrom_Name}    AIS    ${TotalSMS}
    Comment    ${messageFromSMS}=    Convert To String    ${message}
    Comment    Should Match Regexp    ${messageFromSMS}    ${MsgVerifySMS}
    ${result}    Evaluate    ${TotalSMS}-1
    : FOR    ${indexOfActual}    IN RANGE    ${TotalSMS}
    \    Log    Actual : @{messages}[${indexOfActual}]
    \    Log    Expect : ${newMessage}
    \    ${status}=    Run Keyword And Return Status    Should Match Regexp    @{messages}[${indexOfActual}]    ${newMessage}
    \    Run Keyword If    '${status}'=='True'    Exit For Loop
    \    Run Keyword If    ${indexOfActual}==${result}    Fail    Message did not match with regex pattern...
    \    ${indexOfActual}    Evaluate    ${indexOfActual}+1
    Click Mobile Element    ${SenderAIS}
    Mobile Capture Screen At Verify Point    Verify in SMS For Destination Number
    AISAppiumEx.Go Back

Click Confirm Button
    Click Mobile Element    ${btnConfirm}

Verify Dialog Message Transection Successfully
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogWaitConfirmSMS}
    Mobile Capture Screen At Verify Point    Verify In Dialog Message Transection Successfully

Verify Transfer To Postpaid
    Mobile element text should be    ${lblDialogMessage}    ${txtTransferToPostpaid}
    Mobile Capture Screen At Verify Point    Verify in Transfer To Postpaid

Verify Transfer To Other Network
    Mobile element text should be    ${lblDialogMessage}    ${txtTransferToOtherNetwork}
    Mobile Capture Screen At Verify Point    Verify in Transfer To Other Network

Verify Transfer To Self
    Mobile element text should be    ${lblDialogMessage}    ${txtTransferToSelf}
    Mobile Capture Screen At Verify Point    Verify in Transfer To Self

Verify Please Input Destination Number
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogPleaseEnterDest}
    Mobile Capture Screen At Verify Point    Verify in Please Input Destination Number

Verify Dialog Source Suspend
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogSourceSuspend}
    Mobile Capture Screen At Verify Point    Verify in Dialog Source Suspend

Verify Dialog Destination Suspend
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogDestSuspend}
    Mobile Capture Screen At Verify Point    Verify in Dialog Destination Suspend

Verify Dialog Source Blacklist
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogSourceBlacklist}
    Mobile Capture Screen At Verify Point    Verify in Dialog Source Blacklist

Verify Dialog Destination Blacklist
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogDestBlacklist}
    Mobile Capture Screen At Verify Point    Verify in Dialog Destination \ Blacklist

Verify Dialog Source Register Less than 90 Days
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogRegisterLessThan90Day}
    Mobile Capture Screen At Verify Point    Verify in Dialog Source Register Less than 90 Days

Verify Balance Transfer Page With Insufficient Number
    [Arguments]    ${MobileNumber}
    Mobile element name should be    ${lblBalanceTransferPageHeader}    ${txtBalanceTransferPageHeader}
    Mobile element name should be    ${lblMobileNumber}    ${MobileNumber}
    Mobile element name should be    ${txtDescriptionBalanceTransferPage}    ${txtDescriptionBalanceTransfer}
    Mobile element name should be    ${lblDestinationNumberHeader}    ${txtDestinationNumberHeader}
    Mobile element name should be    ${lblTransferAmountHeader}    ${txtTransferAmountHeader}
    Mobile element name should be    ${lblTransferAmount}    ${txtInsufficientBalance}
    Mobile element name should be    ${btnOk}    ${txtOK}
    Swipe to element    ${lblTermsAndConditions}
    Mobile element name should be    ${lblTermsAndConditions}    ${txtTermAndConditions}
    Mobile Capture Screen At Verify Point    Verify in Balance Transfer Page With Balance Insufficient

Verify Transfer To Max Balance
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogMaxBalance}
    Mobile Capture Screen At Verify Point    Verify in Transfer To Postpaid

Verify Not Select Amount
    Mobile element text should be    ${lblDialogMessage}    ${txtDialogPleaseSelectAmount}
    Mobile Capture Screen At Verify Point    Verify in Dialog Not Select Amount

Keywords For Teardown 2 Mobile
    [Arguments]    ${#dict_device_name}
    Run Keyword If Test Failed    Capture Screen with Specific name
    Run Keyword If Test Failed    Log Dialog Msg From MyAIS
    Release Virtual Local Configurations    ${lo_MyAIS_Prod_local_config_file_path}    ${#dict_device_name}
